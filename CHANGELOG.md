## 4 апреля 2018 г.

edumtu v1.5.1 от 04.04.2018 

Изменения:
Согласно требованию Козловской И.А. добавлена возможность переключать варианты формы отчета:
"Вариант 1" и "Вариант 2" согласно письму ИА от 02.04.2018 , а также 
"Вар. План" и "Вар. Финансы" согласно моим предложениям от 02.04.2018.
Соответственно добавлен пункт меню "Вариант..."

Установка:

1. Обновить код программы:

'pull.bat'

2. Запустить сайт

'npm start'

3. Первым действием на сайте загрузить данные, нажав кнопку **"Импорт данных"**

## 2 апреля 2018 г.

From: "Куприянова Татьяна Борисовна" <tkupr@spbstu.ru>
To: "Николаев Е." <eugene@ics2.ecd.spbstu.ru>
Cc: "Евгений Николаев" <eugnik62@gmail.com>
Bcc: 
Date: Mon, 2 Apr 2018 11:48:11 +0000
Subject: Вид отчетов
Женя, пересылаю Вам 2 варианта сметы. ИА хочет, чтобы пользователь мог переключать варианты отчета по кнопке вверху страницы. Обратите внимание на заголовки полей.

От: Козловская Ирина Александровна <Kozlovskaya@SMTU.RU>
Отправлено: 2 апреля 2018 г. 12:10
Кому: Куприянова Татьяна Борисовна
Тема: RE:
Это общий вариант. Второй тоже общий, но в нем только деньги.
Во вложении оба варианта.
Пока второй вариант будет работать только для науки. Когда будут люди, деньги будем считать для всей деятельности.

From: Куприянова Татьяна Борисовна [mailto:tkupr@spbstu.ru]
Sent: Monday, April 2, 2018 10:13 AM
To: Козловская Ирина Александровна
Subject: Re:
Ира, добрый день. Ты хотела 2 варианта сметы 1- для науки, 2 - для образ.деятельности.
Этот вариант будет для всех или ты мне еще что-то пришлешь?

## 26 марта 2018 г., 0:16

### edumtu v1.4.0 от 26.03.2018 

Изменения:
Согласно требованиям Куприяновой Т.Б.,
служебная записка от 23 марта 2018 г., 16:11:35 GMT+3

Установка:
1. Обновить код программы:

`git pull origin master`

2. Файлы с данными от ТБ `Inet_SmetaLSAll.txt` и `Inet_PolzNew.txt`
разместить в папке `"tbPath"` указанной в файле `config_local.js`

P.S.
К сведению.
В данной версии программы я не считываю значение "mongoDB" из config_local.js,
потому как тут понадобилось отдельно указывать host и dbName.
То есть "mongoDB" заменил на два параметра:

  `"dbUrl":  "mongodb://127.0.0.1:27017",`
  
  `"dbName": "edu",`
  
Эти значения используются программой по умолчанию,
то есть программа по умолчанию обращается за данными к локальной машине через порт "27017" в базу данных "edu".
Если вдруг когда потребуется другие значения, надо будет указать их в `config_local.js`, в качестве образца смотри `config_local.js.origin`
Пока же можно ничего не менять.

## 23 марта 2018 г.

Cлужебная записка
От: Куприянова Татьяна Борисовна
Дата: 23 марта 2018 г., 16:11:35 GMT+3

Женя, добрый день. 
Попробуем начать создавать очередной сайт для ИА.
Работаем пока с двумя файлами во вложении.

1. Inet_PolzNew.txt - наш старый файл доступа к лицевым счетам по ФИО.
Только поле ЛицевойСчет (второе в выгрузке) интерпретируем теперь не как Лицевой счет, а как фамилию руководителя Лицевого счета.

2. Файл Inet_SmetaSAll.txt  содержит все сметы по лицевым счетам, руководителям лс и подразделениям. Описываю его структуру:

1 Поле Руководитель -это руководитель лицевого счета (если в файле .Inet_PolzNew.txt он доступен данному пользователю, то раскрываем для него данные по всем лицевым счетам, где стоит этот руководитель).

2  лицевой_счет- Лицевой счет 

3 код_факультета - код факультета, к которому принадлежит ЛС

4 кр_название - кр.название факультета

5 код_кафедры - код кафедры, к которой относится лицевой счет

6 кр_кафедра - ее краткое название

7 Сокр_код - код сметы

8  Название_статьи - название статьи сметы

9 Процент-  процент по смете для лицевого счета

10 Вх_Остаток - Нач остаток

11 Сумма_назначения - Сметные назначения

12 Доход_по_статье - Приход

13 Затраты_с_обяз - Расход с обяз

14 Затраты_факт - Расход фактический

15 Остаток_ден -Остаток фактический

16 Остаток_по_смете - Остаток по смете

17 Остаток_смета_БО - Остаток по смете без учета обязательств

При попадании в систему первая страница должна выглядеть как в файле Пример_ПервойСтраницы.xlsx - доступные для пользователя счета выводятся в рамках структуры подразделений (т.е. исходя из порядковых номеров подразделений)  поля 2.10-2.17 суммируются по лицевым счетам).

Далее, при щелчке по номеру лицевого счета выводится его смета, как в файле Пример_Сметы.xlsx.

Попробуйте для начала сделать это, покажем ИА.
Она может поменять поля или названия. Когда это утрясем, перейдем к получению сгруппированной смете по фамилии Руководителя или по Подразделению.
С уважением, Куприянова Т.Б.

-----------------