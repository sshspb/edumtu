## 9 апреля 2018 г.
От: Куприянова Татьяна Борисовна
Отправлено: 10 апреля 2018 г. 18:04
Кому: Николаев Е.
Копия: Николаев Е.
Тема: по сайту

Пришла ИА, пишу замечания:
1. Заменить название Классификация операций сектора государственного управления на КОСГУ.
2. Убрать варианты отчетов: Вариант1, План, Финансы
3. На вкладке Подразделения+Договоры (договоры везде заменить на лицевые счета) при щелчке на узле подразделения должна выводиться смета по подразделению(группировка смет его лицевых счетов по данному подразделению), а не список лицевых счетов с отчетом по ним.
4. Тоже самое про вкладку Отв+Договоры - при щелчке на Руководителе выводить смету по Руководителю (группировка смет его лицевых счетов по виду деятельности), а не отчет по его лицевым счетам.
5. В головной смете по виду деятельности не выводится Итого
6. Вкладка Отв+Договоры внизу(или вверху, где удобнее вывести общую сумму итога по колонкам)
Повторюсь по вкладками:
Убрать вкладки Подразделения,Договоры, Ответственные.
Оставить: Подр+Договоры, Отв+Договоры

С уважением, Куприянова Т.Б
## 6 апреля 2018 г.

### edumtu v1.6.1 от 06.04.2018 

Изменения:
Учётные данные разделены по направлениям деятельности - основной и научной,
формат отчётных формы приведен в соответствие с требованием Заказчика, 
служебная записка от 5 апреля 2018 г.

Установка:
1. Обновить код программы: `pull.bat`
2. Запустить сайт: `npm start`
3. Первым действием на сайте загрузить данные, нажав кнопку **"Импорт данных"**

## 5 апреля 2018 г.

От кого: Куприянова Татьяна Борисовна
Дата: 5 апреля 2018 г., 12:55
Тема: сайт
Кому: "Николаев Е."
Копия: "Ирина А. Козловская"

 Женя, добрый день.
В продолжение нашей работы. Повторю ТЗ с дополнениями
1. Inet_PolzNew.txt - наш старый файл доступа к лицевым счетам по ФИО.
Поле ЛицевойСчет (второе в выгрузке) интерпретируем теперь не как Лицевой счет, а как фамилию руководителя Лицевого счета.
2. Файл Inet_SmetaSAll.txt  содержит все сметы по лицевым счетам, руководителям лс и подразделениям. Описываю его структуру (добавила 1 поле) с соглсованными названиями полей.

 2.1. Поле Руководитель -это руководитель лицевого счета (если в файле .Inet_PolzNew.txt он доступен данному пользователю, то раскрываем для него данные по всем лицевым счетам, где стоит этот руководитель).
 2.2.  лицевой_счет- Лицевой счет
 2.3. код_факультета - код факультета, к которому принадлежит ЛС
 2.4. кр_название - кр.название факультета
 2.5. код_кафедры - код кафедры, к которой относится лицевой счет
 2.6. кр_кафедра - ее краткое название
 2.7. Сокр_код - код сметы
 2.8.  Название_статьи - название статьи сметы
 2.9. Процент-  процент по смете для лицевого счета
 2.10. Тип_договора- тип лицевого счета
 2.11. Вх_Остаток - Остаток на начало
 2.12. Сумма_назначения - Плановая сумма на год
 2.13. Доход_по_статье - Поступление денеж ср-в.
 2.14. Затраты_с_обяз -Затраты с планом
 2.15. Затраты_факт - Кассовые затраты
 2.16. Остаток_ден -Остаток денеж. средств
 2.17. Остаток_по_смете - Остаток по смете
 2.18. Остаток_смета_БО - Остаток по смете без учета обязательств

Коллеги отправляла Ваше письмо ИА. Она обсудила его со своими коллегами. Файл Excel с формами отчетов вкладываю и названиями граф вкладываю.

Теперь по сайту. Ирина александровна хочет разделить всю информацию на 2 блока.
 При попадании в систему первая страница должна содержать два входа :
1. Основная деятельность.
2. Наука.
в п.1 попадают сведения по всем все ЛС, у которых поле тип_договора не содержит слово "Наука".
в п.2 попадают сведения по всем все ЛС, у которых поле тип_договора содержит слово "Наука".
Далее идут Вкладки по каждому блоку:
1. Подразделения -см. вложение "пример первой страницы"
2. Руководители  см вложение - "Пример руководители"
п.1 д.выглядеть как в файле Пример_ПервойСтраницы.xlsx - доступные для пользователя счета выводятся в рамках структуры подразделений (т.е. исходя из порядковых номеров подразделений)  поля 2.10-2.7 суммируются по лицевым счетам).

Далее, при щелчке по номеру лицевого счета выводится его смета, как в файле Исполнение сметы на 02042018-1 . Выводим по умолчанию первый вариант сметы и наверху кнопка - выбрать вариант, чтобы пользователь мог переключать варианты сметы.

С уважением, Куприянова Т.Б.

## 4 апреля 2018 г.

### edumtu v1.5.1 от 04.04.2018 

Изменения:
Согласно требованию Козловской И.А. добавлена возможность переключать варианты формы отчета:
"Вариант 1" и "Вариант 2" согласно письму ИА от 02.04.2018 , а также 
"Вар. План" и "Вар. Финансы" согласно моим предложениям от 02.04.2018.
Соответственно добавлен пункт меню "Вариант..."

Установка:
1. Обновить код программы: `pull.bat`
2. Запустить сайт: `npm start`
3. Первым действием на сайте загрузить данные, нажав кнопку **"Импорт данных"**

## 2 апреля 2018 г.

From: "Куприянова Татьяна Борисовна"
To: "Николаев Е."
Date: Mon, 2 Apr 2018 11:48:11 +0000
Subject: Вид отчетов
Женя, пересылаю Вам 2 варианта сметы. ИА хочет, чтобы пользователь мог переключать варианты отчета по кнопке вверху страницы. Обратите внимание на заголовки полей.

От: Козловская Ирина Александровна
Отправлено: 2 апреля 2018 г. 12:10
Кому: Куприянова Татьяна Борисовна
Тема: RE:
Это общий вариант. Второй тоже общий, но в нем только деньги.
Во вложении оба варианта.
Пока второй вариант будет работать только для науки. Когда будут люди, деньги будем считать для всей деятельности.

From: Куприянова Татьяна Борисовна
Sent: Monday, April 2, 2018 10:13 AM
To: Козловская Ирина Александровна
Subject: Re:
Ира, добрый день. Ты хотела 2 варианта сметы 1- для науки, 2 - для образ.деятельности.
Этот вариант будет для всех или ты мне еще что-то пришлешь?

## 26 марта 2018 г.

### edumtu v1.4.0 от 26.03.2018 

Изменения:
Согласно требованиям Куприяновой Т.Б.,
служебная записка от 23 марта 2018 г., 16:11:35 GMT+3

Установка:
1. Обновить код программы: `git pull origin master`

2. Файлы с данными от ТБ `Inet_SmetaLSAll.txt` и `Inet_PolzNew.txt`
разместить в папке `"tbPath"` указанной в файле `config_local.js`

P.S.
К сведению.
В данной версии программы я не считываю значение "mongoDB" из config_local.js,
потому как тут понадобилось отдельно указывать host и dbName.
То есть "mongoDB" заменил на два параметра:

  `"dbUrl":  "mongodb://127.0.0.1:27017",`
  
  `"dbName": "edu",`
  
Эти значения используются программой по умолчанию,
то есть программа по умолчанию обращается за данными к локальной машине через порт "27017" в базу данных "edu".
Если вдруг когда потребуется другие значения, надо будет указать их в `config_local.js`, в качестве образца смотри `config_local.js.origin`
Пока же можно ничего не менять.

## 23 марта 2018 г.

Cлужебная записка
От: Куприянова Татьяна Борисовна
Дата: 23 марта 2018 г.

Женя, добрый день. 
Попробуем начать создавать очередной сайт для ИА.
Работаем пока с двумя файлами во вложении.

* Inet_PolzNew.txt - наш старый файл доступа к лицевым счетам по ФИО.
Только поле ЛицевойСчет (второе в выгрузке) интерпретируем теперь не как Лицевой счет, а как фамилию руководителя Лицевого счета.

* Файл Inet_SmetaSAll.txt  содержит все сметы по лицевым счетам, руководителям лс и подразделениям. Описываю его структуру:

1 Поле Руководитель -это руководитель лицевого счета (если в файле .Inet_PolzNew.txt он доступен данному пользователю, то раскрываем для него данные по всем лицевым счетам, где стоит этот руководитель).

2  лицевой_счет- Лицевой счет 

3 код_факультета - код факультета, к которому принадлежит ЛС

4 кр_название - кр.название факультета

5 код_кафедры - код кафедры, к которой относится лицевой счет

6 кр_кафедра - ее краткое название

7 Сокр_код - код сметы

8  Название_статьи - название статьи сметы

9 Процент-  процент по смете для лицевого счета

10 Вх_Остаток - Нач остаток

11 Сумма_назначения - Сметные назначения

12 Доход_по_статье - Приход

13 Затраты_с_обяз - Расход с обяз

14 Затраты_факт - Расход фактический

15 Остаток_ден -Остаток фактический

16 Остаток_по_смете - Остаток по смете

17 Остаток_смета_БО - Остаток по смете без учета обязательств

При попадании в систему первая страница должна выглядеть как в файле Пример_ПервойСтраницы.xlsx - доступные для пользователя счета выводятся в рамках структуры подразделений (т.е. исходя из порядковых номеров подразделений)  поля 2.10-2.17 суммируются по лицевым счетам).

Далее, при щелчке по номеру лицевого счета выводится его смета, как в файле Пример_Сметы.xlsx.

Попробуйте для начала сделать это, покажем ИА.
Она может поменять поля или названия. Когда это утрясем, перейдем к получению сгруппированной смете по фамилии Руководителя или по Подразделению.
С уважением, Куприянова Т.Б.

-----------------
