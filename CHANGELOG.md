
## 27 апреля 2018 г.
###  v1.8.3
Изменения: Исправлена ошибка: отчёт расхода вывод Итого не обнуляется после выбора месяца в случае когда нет записей расхода.
###  v1.8.2
Изменения: В отчёте записей расхода суммы не округляются, выводятся с точностью до копейки.

## 26 апреля 2018 г.
###  v1.8.1
​Изменения: Добавлена возможность выбора месяца в отчётной форме расходных записей.

## 25 апреля 2018 г.
###  v1.8.0
#### Изменения: 
Согласно служебной записке товарища Куприяновой от 23 апреля 2018 добавлены отчётные формы по расходным записям.
#### Установка
1. Новые исходные файлы с данными - разместить в нужную папку.
1. Обновить код программы: `pull.bat`
1. Запустить сайт: `npm start`
1. Первым действием на сайте загрузить данные, нажав кнопку **"Импорт данных"**

## 23 апреля 2018 г.
От: Куприянова Татьяна Борисовна 
> 1. Я поменяла имя выгрузки по смете: вместо Inet_SmetaLSAll теперь называется Inet_MUSmetaLSAll. Я вообще в дальнейшем спец. выгрузки для ИА буду помечать Inet_MU.
> 1. Сделала выгрузку для расходов. Inet_MURashodLS.txt. Описывать поля не буду, там  все ясно из файла Excel "Затраты для интернета" (вложение).
>
> Задача такая:
>
> 1. На вкладке расходы выводить все расходы соответственно для лс/подразделения/руководителя в формате , как в файле excel, т.е. с группировкой и пром итогом по КОСГУ.
> 1. При щелчке на поле КОСГУ в отчете смета  выводить часть списка затрат по соответствующему КОСГУ   соответственно для лс/подразделения/руководителя .
> 1. Во всех отчетах по расходу предусмотреть для пользователя возможность выбора периода. 
>
> Новые выгрузки прилагаю. 


## 19 апреля 2018 г.

###  v1.7.1

Изменения по требованию заказчика:
- Добавлены вкладки Доходы и Расходы для  Руководителя и для Подразделения ( как для Лицевого счета)
- Строка заголовков таблицы фиксируется наверху экрана при прокрутке.

Изменения - наше предложение - если закзачику не подойдёт отменим:
- Строка Итоги таблицы фиксируется внизу экрана при прокрутке.

Установка:  `pull.bat`

## 9 апреля 2018 г.
От: Куприянова Татьяна Борисовна
> 1. Заменить название Классификация операций сектора государственного управления на КОСГУ.
> 1. Убрать варианты отчетов: Вариант1, План, Финансы
> 1. На вкладке Подразделения+Договоры (договоры везде заменить на лицевые счета) при щелчке на узле подразделения должна выводиться смета по подразделению(группировка смет его лицевых счетов по данному подразделению), а не список лицевых счетов с отчетом по ним.
> 1. Тоже самое про вкладку Отв+Договоры - при щелчке на Руководителе выводить смету по Руководителю (группировка смет его лицевых счетов по виду деятельности), а не отчет по его лицевым счетам.
> 1. В головной смете по виду деятельности не выводится Итого
> 1. Вкладка Отв+Договоры внизу(или вверху, где удобнее вывести общую сумму итога по колонкам)
>
>Повторюсь по вкладками:
> - Убрать вкладки Подразделения,Договоры, Ответственные.
> - Оставить: Подр+Договоры, Отв+Договоры

## 6 апреля 2018 г.

###  v1.6.1

Изменения, в соответствии с требованием Заказчика, служебная записка от 5 апреля 2018 г.
- Учётные данные разделены по направлениям деятельности - основной и научной,
- Изменён формат отчётных форм

Установка:
1. Обновить код программы: `pull.bat`
2. Запустить сайт: `npm start`
3. Первым действием на сайте загрузить данные, нажав кнопку **"Импорт данных"**

## 5 апреля 2018 г.

От кого: Куприянова Татьяна Борисовна
> Женя, добрый день.В продолжение нашей работы. Повторю ТЗ с дополнениями
> 1. Inet_PolzNew.txt - наш старый файл доступа к лицевым счетам по ФИО. 
> Поле ЛицевойСчет (второе в выгрузке) интерпретируем теперь не как Лицевой счет, а как фамилию руководителя Лицевого счета.
> 1. Файл Inet_SmetaSAll.txt  содержит все сметы по лицевым счетам, руководителям лс и подразделениям. Описываю его структуру (добавила 1 поле) с соглсованными названиями полей.
>     1. Поле Руководитель -это руководитель лицевого счета (если в файле .Inet_PolzNew.txt он доступен данному пользователю, то раскрываем для него данные по всем лицевым счетам, где стоит этот руководитель).
>     1.  лицевой_счет- Лицевой счет
>     1. код_факультета - код факультета, к которому принадлежит ЛС
>     1. кр_название - кр.название факультета
>     1. код_кафедры - код кафедры, к которой относится лицевой счет
>     1. кр_кафедра - ее краткое название
>     1. Сокр_код - код сметы
>     1.  Название_статьи - название статьи сметы
>     1. Процент-  процент по смете для лицевого счета
>     1. Тип_договора- тип лицевого счета
>     1. Вх_Остаток - Остаток на начало
>     1. Сумма_назначения - Плановая сумма на год
>     1. Доход_по_статье - Поступление денеж ср-в.
>     1. Затраты_с_обяз -Затраты с планом
>     1. Затраты_факт - Кассовые затраты
>     1. Остаток_ден -Остаток денеж. средств
>     1. Остаток_по_смете - Остаток по смете
>     1. Остаток_смета_БО - Остаток по смете без учета обязательств
> 
> Коллеги отправляла Ваше письмо ИА. Она обсудила его со своими коллегами. Файл Excel с формами отчетов вкладываю и названиями граф вкладываю.
> 
> Теперь по сайту. Ирина александровна хочет разделить всю информацию на 2 блока.
> 
>  При попадании в систему первая страница должна содержать два входа :
> 1. Основная деятельность.
> 2. Наука.
> 
> в п.1 попадают сведения по всем все ЛС, у которых поле тип_договора не содержит слово "Наука".
> в п.2 попадают сведения по всем все ЛС, у которых поле тип_договора содержит слово "Наука".
> 
> Далее идут Вкладки по каждому блоку:
> 1. Подразделения -см. вложение "пример первой страницы"
> 2. Руководители  см вложение - "Пример руководители"
> 
> п.1 д.выглядеть как в файле Пример_ПервойСтраницы.xlsx - доступные для пользователя счета выводятся в рамках структуры подразделений (т.е. исходя из порядковых номеров подразделений)  поля 2.10-2.7 суммируются по лицевым счетам).
> 
> Далее, при щелчке по номеру лицевого счета выводится его смета, как в файле Исполнение сметы на 02042018-1 . Выводим по умолчанию первый вариант сметы и наверху кнопка - выбрать вариант, чтобы пользователь мог переключать варианты сметы.

## 4 апреля 2018 г.

###  v1.5.1

Изменения:

Согласно требованию Козловской И.А. добавлена возможность переключать варианты формы отчета:
- "Вариант 1" и "Вариант 2" согласно письму ИА от 02.04.2018 ,
- "Вар. План" и "Вар. Финансы" согласно моим предложениям от 02.04.2018.

Соответственно добавлен пункт меню "Вариант..."

Установка:
1. Обновить код программы: `pull.bat`
2. Запустить сайт: `npm start`
3. Первым действием на сайте загрузить данные, нажав кнопку **"Импорт данных"**

## 2 апреля 2018 г.

From: "Куприянова Татьяна Борисовна"
> Женя, пересылаю Вам 2 варианта сметы. ИА хочет, чтобы пользователь мог переключать варианты отчета по кнопке вверху страницы. Обратите внимание на заголовки полей.

От: Козловская Ирина Александровна
> Это общий вариант. Второй тоже общий, но в нем только деньги. Во вложении оба варианта. Пока второй вариант будет работать только для науки. Когда будут люди, деньги будем считать для всей деятельности.

From: Куприянова Татьяна Борисовна
> Ира, добрый день. Ты хотела 2 варианта сметы 1- для науки, 2 - для образ.деятельности. Этот вариант будет для всех или ты мне еще что-то пришлешь?

## 26 марта 2018 г.

###  v1.4.0

Изменения:
- Согласно требованиям Куприяновой Т.Б., служебная записка от 23 марта 2018 г., 16:11:35 GMT+3

Установка:
1. Обновить код программы: `git pull origin master`
1. Файлы с данными от ТБ `Inet_SmetaLSAll.txt` и `Inet_PolzNew.txt` разместить в папке `"tbPath"` указанной в файле `config_local.js`

P.S.

В данной версии программы я не считываю значение "mongoDB" из `config_local.js`, потому что тут понадобилось отдельно указывать `host` и `dbName`.
То есть параметр `"mongoDB"` заменил на два параметра:
```
"dbUrl":  "mongodb://127.0.0.1:27017",
"dbName": "edu",
```
Эти значения используются программой по умолчанию, то есть программа по умолчанию обращается за данными к локальной машине через порт `"27017"` в базу данных `"edu"`. Если вдруг когда потребуется другие значения, надо будет указать их в `config_local.js`, в качестве образца смотри `config_local.js.origin`

## 23 марта 2018 г.

От: Куприянова Татьяна Борисовна
Дата: 23 марта 2018 г.
> Женя, добрый день. Попробуем начать создавать очередной сайт для ИА. Работаем пока с двумя файлами во вложении.
> * Inet_PolzNew.txt - наш старый файл доступа к лицевым счетам по ФИО.
Только поле ЛицевойСчет (второе в выгрузке) интерпретируем теперь не как Лицевой счет, а как фамилию руководителя Лицевого счета.
> * Файл Inet_SmetaSAll.txt  содержит все сметы по лицевым счетам, руководителям лс и подразделениям. Описываю его структуру:
> 1. Поле Руководитель -это руководитель лицевого счета (если в файле .Inet_PolzNew.txt он доступен данному пользователю, то раскрываем для него данные по всем лицевым счетам, где стоит этот руководитель).
> 1.  лицевой_счет- Лицевой счет 
> 1. код_факультета - код факультета, к которому принадлежит ЛС
> 1. кр_название - кр.название факультета
> 1. код_кафедры - код кафедры, к которой относится лицевой счет
> 1. кр_кафедра - ее краткое название
> 1. Сокр_код - код сметы
> 1.  Название_статьи - название статьи сметы
> 1. Процент-  процент по смете для лицевого счета
> 1. Вх_Остаток - Нач остаток
> 1. Сумма_назначения - Сметные назначения
> 1. Доход_по_статье - Приход
> 1. Затраты_с_обяз - Расход с обяз
> 1. Затраты_факт - Расход фактический
> 1. Остаток_ден -Остаток фактический
> 1. Остаток_по_смете - Остаток по смете
> 1. Остаток_смета_БО - Остаток по смете без учета обязательств
>
> При попадании в систему первая страница должна выглядеть как в файле Пример_ПервойСтраницы.xlsx - доступные для пользователя счета выводятся в рамках структуры подразделений (т.е. исходя из порядковых номеров подразделений)  поля 2.10-2.17 суммируются по лицевым счетам). Далее, при щелчке по номеру лицевого счета выводится его смета, как в файле Пример_Сметы.xlsx. Попробуйте для начала сделать это, покажем ИА. Она может поменять поля или названия. Когда это утрясем, перейдем к получению сгруппированной смете по фамилии Руководителя или по Подразделению.

-----------------
